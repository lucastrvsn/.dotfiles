### Variables
set $mod Mod4
set $left h
set $down j
set $up k
set $right l
set $term alacritty
set $menu wofi --mode drun

# default font
font pango:JetBrains Mono 12

# drag floating windows
floating_modifier $mod normal

# output configuration
output * bg ~/Pictures/wallpapers/wallhaven-vg7lv3.jpg fill

# idle configuration
exec swayidle -w \
  timeout 300 'swaylock -f -c 000000' \
  timeout 600 'swaymsg "output * dpms off"' resume 'swaymsg "output * dpms on"' \
  before-sleep 'swaylock -f -c 000000'

# input configuration
input "type:keyboard" {
  xkb_layout us
  xkb_variant intl
}

input "type:touchpad" {
  tap enabled
  natural_scroll enabled
}

input "5426:32:Razer_Razer_Abyssus_1800" {
  accel_profile flat
  pointer_accel -0.4
}

# layout stuff
default_border pixel 1
default_floating_border normal 1
hide_edge_borders smart
gaps inner 8
gaps outer 0
smart_gaps on

# colors
set $bg       #282828
set $fg       #d4be98
set $red      #ea6962
set $orange   #e78a4e
set $green    #a9b665
set $blue     #7daea3
set $purple   #d3869b
set $aqua     #89b482
set $darkgray #282828

#                       border  bg      txt indi    childborder
client.focused          $orange $orange $bg $orange $orange
client.focused_inactive $aqua   $aqua   $bg $aqua   $aqua
client.unfocused        $bg     $bg     $bg $bg     $bg
client.urgent           $red    $red    $bg $red    $red
client.placeholder      $bg     $bg     $bg $bg     $bg
client.background       $bg

# key bindings
bindsym --to-code {
  # start a terminal
  $mod+Return exec $term

  #program launcher
  $mod+d exec $menu

  # kill focused window
  $mod+q kill

  # lock screen
  $mod+g lock

  # change focus
  $mod+$left focus left
  $mod+$down focus down
  $mod+$up focus up
  $mod+$right focus right

  # move focused window
  $mod+shift+$left move left
  $mod+shift+$down move down
  $mod+shift+$up move up
  $mod+shift+$right move right

  # split in horizontal orientation
  $mod+shift+v splith

  # split in vertical orientation
  $mod+v splitv

  # enter fullscreen mode for the focused container
  $mod+f fullscreen

  # change container layout (stacked, tabbed, toggle split)
  $mod+s layout stacking
  $mod+w layout tabbed
  $mod+e layout toggle split

  # toggle tiling / floating
  $mod+shift+space floating toggle

  # change focus between tiling / floating windows
  $mod+space focus mode_toggle

  # focus the parent container
  $mod+a focus parent

  # focus the child container
  $mod+shift+a focus child

  # switch to workspace
  $mod+1 workspace 1
  $mod+2 workspace 2
  $mod+3 workspace 3
  $mod+4 workspace 4
  $mod+5 workspace 5
  $mod+6 workspace 6
  $mod+7 workspace 7
  $mod+8 workspace 8
  $mod+9 workspace 9
  $mod+0 workspace 10
  $mod+comma exec prev-workspace 
  $mod+period exec next-workspace

  # move focused container to workspace
  $mod+shift+1 move container to workspace 1
  $mod+shift+2 move container to workspace 2
  $mod+Shift+3 move container to workspace 3
  $mod+Shift+4 move container to workspace 4
  $mod+Shift+5 move container to workspace 5
  $mod+Shift+6 move container to workspace 6
  $mod+Shift+7 move container to workspace 7
  $mod+Shift+8 move container to workspace 8
  $mod+Shift+9 move container to workspace 9
  $mod+Shift+0 move container to workspace 10

  # reload the configuration file
  $mod+shift+c reload

  # resize key
  $mod+r mode "resize"

  # open a file manager
  $mod+n exec $term -e nnn

  # pulseaudio controls, requires playerctl
  XF86AudioRaiseVolume exec pactl set-sink-volume $(pacmd list-sinks | awk '/* index:/{print $3}') +5%
  XF86AudioLowerVolume exec pactl set-sink-volume $(pacmd list-sinks | awk '/* index:/{print $3}') -5%
  XF86AudioMute exec pactl set-sink-mute $(pacmd list-sinks | awk '/* index:/{print $3}') toggle
  XF86AudioPlay exec playerctl play-pause
  XF86AudioNext exec playerctl next
  XF86AudioPrev exec playerctl previous

  # keybind for PTT applications like mumble, discord, because it doesn't work properly under wayland
  $mod+tab exec mute-toggle

  # sreen brightness controls, requires light
  XF86MonBrightnessUp exec light -A 10
  XF86MonBrightnessDown exec light -U 10
}

# resize windows
mode "resize" {
  bindsym --to-code {
    $left resize shrink width 10 px or 10 ppt
    $down resize grow height 10 px or 10 ppt
    $up resize shrink height 10 px or 10 ppt
    $right resize grow width 10 px or 10 ppt

    # return to default mode
    return mode "default"
    escape mode "default"
  }
}

# power mode
set $mode_power (l) lock, (e) logout, (s) suspend, (R) reboot, (S) shutdown
mode "$mode_power" {
  bindsym l       exec swaylock -f -c 000000, mode "default"
  bindsym e       exit
  bindsym s       exec systemctl suspend, mode "default"
  bindsym shift+r exec systemctl reboot, mode "default"
  bindsym shift+s exec systemctl poweroff -i, mode "default"

  # return to default mode
  bindsym return mode "default"
  bindsym escape mode "default"
}

bindsym $mod+Shift+e mode "$mode_power"

# statusbar
bar {
  swaybar_command waybar
  # position top
  # status_command while ~/.config/sway/bar.sh; do sleep 1; done
  # font pango:Fixedsys Excelsior 12
  # colors {
  #   statusline #f6f4e6
  #   background #3c2946
  #   #                  border  background text
  #   focused_workspace  #000000 #ffffff    #ff00ff
  #   active_workspace   #000000 #ffffff    #ff00ff
  #   inactive_workspace #ffffff #000000    #00ff00
  #   binding_mode       #ffd571 #ffd571    #3c2946
  # }
}

# set gnome theme
set $gnome-schema org.gnome.desktop.interface

exec_always {
  gsettings set $gnome-schema gtk-theme 'Adwaita-dark'
  gsettings set $gnome-schema icon-theme 'Adwaita'
  gsettings set $gnome-schema cursor-theme 'OpenZone_White'
  gsettings set $gnome-schema font-name 'Noto Sans 11'
}

# startup
exec kanshi
exec mako

# include default sway config
include /etc/sway/config.d/*
